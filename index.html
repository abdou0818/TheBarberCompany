<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>صالون الحلاقة الملكي</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
    body { font-family: sans-serif; margin:0; padding:0; background:#f0f0f0; transition: background 0.5s; }
    .shop-header { text-align:center; padding:20px; }
    .shop-name { font-size:2em; font-weight:600; }
    .shop-subtitle { font-size:1.2em; color:#555; }
    .chairs-grid { display:flex; gap:10px; justify-content:center; margin:20px 0; }
    .chair-card { background:#fff; padding:15px; border-radius:10px; width:120px; text-align:center; transition: transform 0.3s; }
    .chair-card.available { border:2px solid #27ae60; }
    .chair-card.occupied { border:2px solid #e74c3c; }
    .chair-status { display:block; margin-top:10px; font-weight:600; }
    .gallery-grid { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin:20px 0; }
    .gallery-item { position:relative; width:150px; height:100px; overflow:hidden; border-radius:10px; cursor:pointer; }
    .gallery-item img { width:100%; height:100%; object-fit:cover; transition: transform 0.3s; }
    .gallery-item:hover img { transform: scale(1.1); }
    .gallery-item-overlay { position:absolute; bottom:0; left:0; right:0; background:rgba(0,0,0,0.5); color:#fff; padding:5px; font-size:12px; text-align:center; }
    .settings-modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:1000; }
    .settings-content { background:#fff; padding:20px; border-radius:10px; width:90%; max-width:500px; max-height:90%; overflow:auto; }
    .settings-section { margin-bottom:15px; }
    .settings-section label { display:block; margin-bottom:5px; font-weight:600; }
    .settings-section input, .settings-section textarea { width:100%; padding:8px; border:1px solid #ccc; border-radius:5px; }
    .modal-close { float:right; cursor:pointer; color:#e74c3c; font-weight:600; }
    .save-btn, .add-img-btn { padding:10px 15px; background:#27ae60; color:#fff; border:none; border-radius:5px; cursor:pointer; margin-top:5px; }
</style>
</head>
<body>

<div class="shop-header">
    <div class="shop-name">صالون الحلاقة الملكي</div>
    <div class="shop-subtitle">أفضل خدمات الحلاقة والتجميل</div>
</div>

<div class="chairs-grid">
    <div class="chair-card available"><div class="chair-status available">متاح</div></div>
    <div class="chair-card available"><div class="chair-status available">متاح</div></div>
    <div class="chair-card available"><div class="chair-status available">متاح</div></div>
</div>

<div class="gallery-grid"></div>

<button id="openSettings" class="save-btn">فتح لوحة الإعدادات</button>

<div id="settingsModal" class="settings-modal">
    <div class="settings-content">
        <span class="modal-close" id="closeSettings">&times;</span>
        <h2>لوحة الإعدادات</h2>

        <div class="settings-section">
            <label>اسم الصالون</label>
            <input type="text" data-setting-key="name">
        </div>

        <div class="settings-section">
            <label>وصف الصالون</label>
            <input type="text" data-setting-key="subtitle">
        </div>

        <div class="settings-section">
            <label>عدد الكراسي</label>
            <input type="number" data-setting-key="chairCount">
        </div>

        <div class="settings-section">
            <label>الحد الأقصى للانتظار</label>
            <input type="number" data-setting-key="maxWaiting">
        </div>

        <div class="settings-section">
            <label>رفع صور جديدة للمعرض</label>
            <input type="file" id="addImageInput" accept="image/*" multiple>
            <button class="add-img-btn" id="addImageBtn">إضافة الصورة/الصور</button>
        </div>

        <button id="save-settings-btn" class="save-btn">حفظ التغييرات</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    let currentSettings = {
        name: "صالون الحلاقة الملكي",
        subtitle: "أفضل خدمات الحلاقة والتجميل",
        chairCount: 3,
        maxWaiting: 20,
        gallery: []
    };

    const modal = document.getElementById('settingsModal');
    const openBtn = document.getElementById('openSettings');
    const closeBtn = document.getElementById('closeSettings');
    const saveBtn = document.getElementById('save-settings-btn');
    const addImageInput = document.getElementById('addImageInput');
    const addImageBtn = document.getElementById('addImageBtn');
    const galleryGrid = document.querySelector('.gallery-grid');

    openBtn.addEventListener('click', () => modal.style.display='flex');
    closeBtn.addEventListener('click', () => modal.style.display='none');
    window.addEventListener('click', e => { if(e.target == modal) modal.style.display='none'; });

    function applySettings(settings){
        document.querySelector('.shop-name').textContent = settings.name;
        document.querySelector('.shop-subtitle').textContent = settings.subtitle;

        // الكراسي
        const chairCards = document.querySelectorAll('.chair-card');
        chairCards.forEach((card,i)=>{
            const status = card.querySelector('.chair-status');
            if(i<settings.chairCount){
                card.classList.add('available'); card.classList.remove('occupied');
                if(status){ status.textContent='متاح'; status.classList.add('available'); status.classList.remove('occupied'); }
            } else {
                card.classList.remove('available'); card.classList.add('occupied');
                if(status){ status.textContent='مشغول'; status.classList.remove('available'); status.classList.add('occupied'); }
            }
        });

        // معرض الصور
        galleryGrid.innerHTML='';
        settings.gallery.forEach(img=>{
            const div = document.createElement('div');
            div.classList.add('gallery-item');
            div.innerHTML = `<img src="${img.src}" alt="${img.alt||''}"><div class="gallery-item-overlay">${img.alt||''}</div>`;
            galleryGrid.appendChild(div);
        });

        // ملء Inputs
        document.querySelectorAll('.settings-section input[data-setting-key]').forEach(input=>{
            const key = input.dataset.settingKey;
            if(key && settings[key]!==undefined) input.value=settings[key];
        });
    }

    // التحديث عند الكتابة مباشرة
    document.querySelectorAll('.settings-section input[data-setting-key]').forEach(input=>{
        input.addEventListener('input', ()=>{
            const key = input.dataset.settingKey;
            if(!key) return;
            currentSettings[key]=input.type==='number'?parseInt(input.value)||0:input.value;
            applySettings(currentSettings);
        });
    });

    // إضافة الصور من الجهاز مباشرة
    addImageBtn.addEventListener('click', ()=>{
        const files = addImageInput.files;
        if(!files.length) return alert('اختر صورة واحدة على الأقل!');
        Array.from(files).forEach(file=>{
            const reader = new FileReader();
            reader.onload = e=>{
                currentSettings.gallery.push({src:e.target.result, alt:file.name});
                applySettings(currentSettings);
            };
            reader.readAsDataURL(file);
        });
        addImageInput.value='';
    });

    saveBtn.addEventListener('click', ()=>{
        alert('تم تطبيق جميع التغييرات للزوار مباشرة!');
        modal.style.display='none';
        console.log(currentSettings);
    });

    applySettings(currentSettings);
});
</script>

</body>
</html>
